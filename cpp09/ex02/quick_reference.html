<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Test - Ford-Johnson</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #f5f5f5;
        }
        .step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }
        .step h3 {
            color: #667eea;
            margin: 0 0 10px 0;
        }
        .array {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }
        .item {
            padding: 8px 12px;
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 4px;
            font-weight: bold;
        }
        .pair {
            padding: 8px;
            background: #f3e5f5;
            border: 2px solid #9c27b0;
            border-radius: 4px;
            display: inline-block;
            margin: 5px;
        }
        .highlight {
            background: #ffeb3b !important;
        }
    </style>
</head>
<body>
    <h1>Ford-Johnson Quick Reference: [6, 9, 5, 8, 3, 4, 1, 2, 7]</h1>
    
    <div class="step">
        <h3>Step 0: Initial</h3>
        <div class="array">
            <div class="item">6</div>
            <div class="item">9</div>
            <div class="item">5</div>
            <div class="item">8</div>
            <div class="item">3</div>
            <div class="item">4</div>
            <div class="item">1</div>
            <div class="item">2</div>
            <div class="item highlight">7</div>
        </div>
        <p>9 elements (odd) → save 7 as leftover</p>
    </div>

    <div class="step">
        <h3>Step 1: Create Pairs</h3>
        <div>
            <span class="pair">(6,9)</span>
            <span class="pair">(5,8)</span>
            <span class="pair">(3,4)</span>
            <span class="pair">(1,2)</span>
        </div>
        <p>Each pair: (smaller, larger) = (b, a)</p>
    </div>

    <div class="step">
        <h3>Step 2: Extract 'a' values</h3>
        <div class="array">
            <div class="item">9</div>
            <div class="item">8</div>
            <div class="item">4</div>
            <div class="item">2</div>
        </div>
    </div>

    <div class="step">
        <h3>Step 3: Sort 'a' values</h3>
        <div class="array">
            <div class="item">2</div>
            <div class="item">4</div>
            <div class="item">8</div>
            <div class="item">9</div>
        </div>
    </div>

    <div class="step">
        <h3>Step 4: Reorder pairs by sorted 'a'</h3>
        <div>
            <span class="pair">(1,2)</span>
            <span class="pair">(3,4)</span>
            <span class="pair">(5,8)</span>
            <span class="pair">(6,9)</span>
        </div>
    </div>

    <div class="step">
        <h3>Step 5: Build main chain</h3>
        <p>Start with b₁ = 1</p>
        <div class="array">
            <div class="item">1</div>
        </div>
        <p>Add all 'a' values: [1, 2, 4, 8, 9]</p>
        <div class="array">
            <div class="item">1</div>
            <div class="item">2</div>
            <div class="item">4</div>
            <div class="item">8</div>
            <div class="item">9</div>
        </div>
    </div>

    <div class="step">
        <h3>Step 6: Jacobsthal for 3 remaining b's</h3>
        <p>Jacobsthal: [0, 1, 1, 3, 5]</p>
        <p>Insertion order (indices): [3, 2, 1]</p>
        <p>Insertion order (values): [6, 5, 3]</p>
        <div>
            Remaining b values:
            <span class="pair">b₂=3</span>
            <span class="pair">b₃=5</span>
            <span class="pair">b₄=6</span>
        </div>
    </div>

    <div class="step">
        <h3>Step 7a: Insert b₄ = 6 (paired with a₄=9)</h3>
        <p>Before: [1, 2, 4, 8, 9]</p>
        <p>Search range: [0 to pos(9)=4] → [1, 2, 4, 8, 9]</p>
        <p>Insert 6 between 4 and 8</p>
        <p>After: [1, 2, 4, <strong>6</strong>, 8, 9]</p>
    </div>

    <div class="step">
        <h3>Step 7b: Insert b₃ = 5 (paired with a₃=8)</h3>
        <p>Before: [1, 2, 4, 6, 8, 9]</p>
        <p>Search range: [0 to pos(8)=4] → [1, 2, 4, 6, 8]</p>
        <p>Insert 5 between 4 and 6</p>
        <p>After: [1, 2, 4, <strong>5</strong>, 6, 8, 9]</p>
    </div>

    <div class="step">
        <h3>Step 7c: Insert b₂ = 3 (paired with a₂=4)</h3>
        <p>Before: [1, 2, 4, 5, 6, 8, 9]</p>
        <p>Search range: [0 to pos(4)=2] → [1, 2, 4]</p>
        <p>Insert 3 between 2 and 4</p>
        <p>After: [1, 2, <strong>3</strong>, 4, 5, 6, 8, 9]</p>
    </div>

    <div class="step">
        <h3>Step 8: Insert leftover = 7</h3>
        <p>Before: [1, 2, 3, 4, 5, 6, 8, 9]</p>
        <p>Search range: entire array</p>
        <p>Insert 7 between 6 and 8</p>
        <p>After: [1, 2, 3, 4, 5, 6, <strong>7</strong>, 8, 9]</p>
    </div>

    <div class="step" style="border-left-color: #4caf50;">
        <h3 style="color: #4caf50;">✅ Final Result</h3>
        <div class="array">
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">1</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">2</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">3</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">4</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">5</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">6</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">7</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">8</div>
            <div class="item" style="background: #c8e6c9; border-color: #4caf50;">9</div>
        </div>
    </div>

    <div style="background: #fff3cd; padding: 20px; margin: 20px 0; border-left: 4px solid #ffc107;">
        <h3>Key Points:</h3>
        <ul>
            <li><strong>Pairs always (b, a)</strong> where b ≤ a</li>
            <li><strong>Main chain starts</strong> with b₁, then all a's</li>
            <li><strong>Jacobsthal order</strong> determines insertion sequence</li>
            <li><strong>Limited search</strong>: each b searches up to its paired a</li>
            <li><strong>Binary search</strong> finds optimal insertion position</li>
        </ul>
    </div>

    <div style="background: #e3f2fd; padding: 20px; margin: 20px 0; border-left: 4px solid #2196f3;">
        <h3>Understanding the Order:</h3>
        <p><strong>Why insert in order [6, 5, 3] instead of [3, 5, 6]?</strong></p>
        <p>The Jacobsthal sequence determines the optimal insertion order to minimize worst-case comparisons:</p>
        <ul>
            <li>Index order [3, 2, 1] comes from Jacobsthal formula</li>
            <li>This translates to inserting b₄, then b₃, then b₂</li>
            <li>Which are values [6, 5, 3]</li>
            <li>This order is proven to minimize comparison count</li>
        </ul>
    </div>
</body>
</html>
